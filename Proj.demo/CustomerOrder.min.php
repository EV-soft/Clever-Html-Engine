<?php $DocFil='./Proj1/demoFile/CustomerOrder.page.php';$DocVer='1.0.0';$DocRev='2020-07-17';$DocIni='evs';$ModulNr=0;require_once('../php2html.lib.php');require_once('../menu.inc.php');function DEB_Kateg(){return([ ['priv','@privat','@private'],['prof','@erhverv','@professional'],]);}function DEB_Grup(){return([ ['1','@1. Danske debitorer','@1. Danske debitorer'],['2','@2. Europæiske debitorer','@2. Europæiske debitorer'] ]);}function DEB_Betl(){return([ ['1','@Kontant','@Kontant'],['2','@Efterkrav','@Efterkrav'],['3','@Forud','@Forud'],['4','@Kreditkort','@Kreditkort'],['5','@Lb. måned','@Lb. Md.'],['6','@Konto','@Konto'] ]);}function DEB_Frist(){return([ ['0','@Straks','@Betaling øjeblikkelig' ],['8','@8 dage','@Betaling inden 8 dage' ],['14','@14 dage','@Betaling inden 14 dage'],['30','@30 dage','@Betaling inden 30 dage'] ]);}function DEB_Dok(){return([ ['pdf','@PDF-fil','@Fil i pdf-format' ],['email','@email','@Elektronisk forsendelse'],['ioubl','@OIOUBL','@Elektronisk fakturering'],['pbs','@PBS','@PBS faktura' ] ]);}function CVR_Land(){return([ ['dk','@Danmark','@Søg i dansk register','checked'],['no','@Norge','@Søg i norsk register',''] ]);}function CVR_Liste(){return([ ['search','@Generelt','@Generel søgning: (ikke telf.)',''],['vat','@CVR','@Centralt Virksomheds Registernr',''],['produ','@P-enh.','@Produktionsenhed-nr',''],['phone','@Telefon','@Telefonnummer',''],['name','@Firma','@Firma navn','checked'] ]);}function refresh($name){if(isset($_POST[$name])){$_SESSION[$name]=$$name=htmlspecialchars($_POST[$name]);return $$name;}}function set_FormVars($names){foreach($names as $name)$$name=refresh($name);}function get_FormVars($names){foreach($names as $name)$$name=$_SESSION[$name];}function dev_show(){if($GLOBALS["Ødebug"]){echo 'SESSIONS variablers indhold: ';vis_data($_SESSION);}}arrPrint($_POST,'$_POST');function form2arr(&$arr,$checks=[]){$result=[];foreach($_POST as $key=>$val){if(substr($key,0,4)!='btn_')$result[$key]=$val;}$arr=$result;}function tabl2arr(&$arr,$firstId){$arrTmp=[];$result=[];foreach($_POST as $key=>$val){if(substr($key,0,4)!='btn_')$arrTmp[$key]=$val;}for($i=0;$i<count($arrTmp[$firstId]);$i++){foreach($arrTmp as $key=>$val){switch($key){case 'ord_total':case 'total':case 'price':$val=str_replace([" ","."],["",""],$val);break;}$arrRow[$key]=$val[$i];}$result[]=$arrRow;}$arr=$result;}function fromFile($dPath,$arrNames){foreach($arrNames as $aname){if(is_readable($dPath.$aname.'.dat.json'))FileRead_arr($dPath.$aname.'.dat.json',$GLOBALS[$aname]);}}$test=false;$KIS=false;$dPath='../demoData/';$bytes=0;if(isset($_POST['btn_sav_orders' ])){tabl2arr($arrOrders,'ord_id');$bytes+=FileWrite_arr($dPath.$filepath='arrOrders.dat.json',$arrOrders);}if(isset($_POST['btn_sav_content' ])){tabl2arr($arrContent,'post');$bytes+=FileWrite_arr($dPath.$filepath='arrContent.dat.json',$arrContent);}if(isset($_POST['btn_sav_customr' ])){form2arr($arrCustomr);$bytes+=FileWrite_arr($dPath.$filepath='arrCustomr.dat.json',$arrCustomr);}if(isset($_POST['btn_sav_billing' ])){form2arr($arrBilling);$bytes+=FileWrite_arr($dPath.$filepath='arrBilling.dat.json',$arrBilling);}if(isset($_POST['btn_sav_deliver' ])){form2arr($arrDeliver);$bytes+=FileWrite_arr($dPath.$filepath='arrDeliver.dat.json',$arrDeliver);}if(isset($_POST['btn_sav_conditi' ])){form2arr($arrConditi);$bytes+=FileWrite_arr($dPath.$filepath='arrConditi.dat.json',$arrConditi);}if(isset($_POST['btn_sav_mailinv' ])){form2arr($arrMailing);$bytes+=FileWrite_arr($dPath.$filepath='arrMailing.dat.json',$arrMailing);}if(isset($_POST['btn_sav_contact' ])){form2arr($arrContact);$bytes+=FileWrite_arr($dPath.$filepath='arrContact.dat.json',$arrContact);}if(isset($_POST['btn_sav_custFld' ])){form2arr($arrCustfld);$bytes+=FileWrite_arr($dPath.$filepath='arrCustfld.dat.json',$arrCustfld);}if(isset($_POST['btn_sav_cvrform' ])){}if(isset($_POST['btn_sav_language'])){$lang=$_POST['language'];}if(isset($_POST['btn_cre_contact' ])){}if(isset($_POST['btn_era_contact' ])){}if(isset($_POST['btn_goo_doLookup'])){}if(isset($_POST['btn_cre_doInvo' ])){}if(isset($_POST['btn_cre_doNote' ])){}if(isset($_POST['btn_hom_doCredit'])){}if(isset($_POST['btn_era_doErase' ])){}$arrNames=['arrCustomr','arrBilling','arrDeliver','arrConditi','arrMailing','arrContact','arrCustfld','arrOrders','arrContent'];fromfile($dPath,$arrNames);htm_PagePrep($pageTitl='OrderCreate.page.php',$ØPageImage='../_background.png',$align='center',$PgInfo=lang('@Example: Customer-ORDER'),$PgHint=lang('Tip: Toggle fullscreen-mode with function key: F11'));Menu_Topdropdown(true);htm_nl(1);if($test)echo '<pre>'.$log.'</pre>'.'<br>Saved: '.$bytes.' bytes to data-files.<br>';htm_Caption($labl='Tiny-Cloud-Accounting',$style='color:'.$ØTitleColr.'; font-weight:600; font-size: 18px;',$align='center');htm_nl(1);htm_PanlHead($frmName='orders',$capt=lang('@Find existing order:'),$parms='',$icon='fas fa-search',$class='panelW960',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: rgba(240, 240, 240, 0.80);');htm_Table($TblCapt=array(['@Oprettede','Width','html','OutFormat','horJust','Tip','placeholder','@Kundeordrer']),$RowPref=array(),$RowBody=array(['@id','8%','show','',['center'],'@id nummer vedligeholdt af systemet','..auto..'],['@Ordre','9%','indx','',['center'],'@Ordre nummer','@Numr...'],['@Ordre dato','4%','date','',['left' ],'@Ordre dato','YYYY-MM-DD'],['@Lev. dato','4%','date','',['left' ],'@Leverings dato','YYYY-MM-DD'],['@Konto','8%','text','',['center'],'@Debitor konto nummer','@Kont...'],['@Firma navn','34%','text','',['left' ],'@Firma navn','@Firm...'],['@Sælger','7%','text','',['left' ],'@Sælger','@Sælg...'],['@Beløb','11%','text','2d',['right' ],'@Ordre sum','@Beløb...'],['@Status','9%','osta','',['left' ],'@Status','@Status...']),$RowSuff=array(),$TblNote='',$TblData=$arrOrders,$fldNames=['ord_id','ord_ix','ord_date','del_date','ord_acco','ord_name','ord_sell','ord_total','ord_stat'],$FilterOn=true,$SorterOn=true,$CreateRec=false,$ModifyRec=true,$ViewHeight='200px',$TblStyle='',$CalledFrom=__FUNCTION__);htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='',$capt=lang('@Create new or modify order:'),$parms='',$icon='fas fa-plus',$class='panelW960',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: rgba(240, 240, 240, 0.80);');htm_PanlHead($frmName='customr',$capt=lang('Customer:'),$parms='',$icon='fas fa-user',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='text',$name='custkont',$valu=$arrCustomr[$name],$labl='@kunde nr.',$hint='@Kundenr: Kan ikke rettes, kun nyoprettes. Systemet styrer dette',$plho='@Konto',$width='50%');htm_Input($type='opti',$name='custopsl',$valu=$arrCustomr[$name],$labl='@Kundeopslag',$hint='@Her vælges hvilken eksisterende kunde der skal benyttes',$plho='',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[]);htm_Input($type='rado',$name='custkate',$valu=$arrCustomr[$name],$labl='@Kundetype',$hint='@Kunde kategori',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required',$list=DEB_Kateg());htm_Input($type='text',$name='cust_cvr',$valu=$arrCustomr[$name],$labl='@CVR',$hint='@CVR - Virksomheds ID.',$plho='@kun erhverv !',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid green;');htm_Input($type='text',$name='cust_ean',$valu=$arrCustomr[$name],$labl='@EAN',$hint='@EAN - Elektronisk-betalings ID',$plho='@kun erhverv !',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid green;');htm_Input($type='text',$name='custbreg',$valu=$arrCustomr[$name],$labl='@Bank reg.',$hint='@Bank reg.',$plho='Reg...',$width='33%');htm_Input($type='text',$name='custbkto',$valu=$arrCustomr[$name],$labl='@Bank konto',$hint='@Bank konto',$plho='Konto...',$width='66%');htm_Input($type='text',$name='custinst',$valu=$arrCustomr[$name],$labl='@Institution',$hint='@Supplerende oplysning',$plho='@kun erhverv !',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid green;');htm_Input($type='text',$name='custansv',$valu=$arrCustomr[$name],$labl='@Kundeansvarlig',$hint='@Kundeansvarlig',$plho='@Ansv...',$width='100%');htm_Input($type='text',$name='custlang',$valu=$arrCustomr[$name],$labl='@Faktureringssprog',$hint='@Sproget som skal benyttes på faktura udskrifter',$plho='@hvis sproget ikke er dansk',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='R',$bord='border: 1px solid green;');htm_Input($type='text',$name='custhome',$valu=$arrCustomr[$name],$labl='@Hjemmeside',$hint='@Kundens hjemmeside',$plho='@kun erhverv !',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid green;');htm_MiniNote('@Orange felter er obligatoriske.');htm_MiniNote('@Grønne felter - begrænset anvendelse.');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='billing',$capt=lang('Billing:'),$parms='',$icon='fas fa-pen',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='area',$name='billoref',$valu=$arrBilling[$name],$labl='@Order info',$hint='@@Systemfield: Auto fill out, when order is created/saved',$plho='@Order:... Date:...',$width='100%',$algn='left',$unit='',$disa=true,$rows='1');htm_Input($type='text',$name='billnavn',$valu=$arrBilling[$name],$labl='@Customer name',$hint='@Angiv Kunde navn',$plho='@Name...',$width='100%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required');htm_Input($type='text',$name='billaddr',$valu=$arrBilling[$name],$labl='@Customer address',$hint='@Angiv Faktura adresse',$plho='@Adress...',$width='100%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required');htm_Input($type='text',$name='billsted',$valu=$arrBilling[$name],$labl='@Customer place',$hint='@Angiv Faktura Sted',$plho='@Place...');htm_Input($type='text',$name='billponr',$valu=$arrBilling[$name],$labl='@Postnr',$hint='@Postnr',$plho='@Pnr...',$width='30%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required');htm_Input($type='text',$name='billbynv',$valu=$arrBilling[$name],$labl='@Faktura By',$hint='@Faktura by',$plho='@Bynavn...',$width='68%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required');htm_Input($type='text',$name='billland',$valu=$arrBilling[$name],$labl='@Faktura Land',$hint='@Faktura Land',$plho='@Land...');htm_hr($ØTitleColr.'; height: 2px');htm_Input($type='text',$name='billtelf',$valu=$arrBilling[$name],$labl='@Telefon(er)',$hint='@Telefon, mobil, fax',$plho='@Phone...',$width='100%',$$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='required');htm_Input($type='text',$name='bill_att',$valu=$arrBilling[$name],$labl='@Attention',$hint='@Attention - Kundens kontakt',$plho='@Att...');htm_Input($type='text',$name='billrekv',$valu=$arrBilling[$name],$labl='@Réquisition number',$hint='@Reference til bestilling',$plho='@Requ...');htm_Input($type='text',$name='billmail',$valu=$arrBilling[$name],$labl='@Kundens Email adresse',$hint='@Faktura Land',$plho='@Mail...');htm_Input($type='text',$name='billnote',$valu=$arrBilling[$name],$labl='@Bemærkninger',$hint='@Noter angående kunden',$plho='@Bem...');if(isset($_POST['use_mail'])){$use_mail='checked';}htm_Input($type='chck',$name='use_mail',$valu=$arrBilling[$name],$labl='@Mailing',$hint='@Send faktura med mail',$plho='@Enter...',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[['use_mail','@Use mail','@Mailing active',$namechck]]);htm_Input($type='date',$name='ordrdato',$valu=$arrBilling[$name],$labl='@Ordre Dato',$hint='@Dato for ordrens oprettelse',$plho='@Date...',$width='50%');htm_Input($type='date',$name='faktdato',$valu=$arrBilling[$name],$labl='@Faktura Dato',$hint='@Fakturerings dato',$plho='@Date...',$width='50%');htm_Input($type='date',$name='gen_fakt',$valu=$arrBilling[$name],$labl='@Genfakturering',$hint='@Genfakturerings dato',$plho='@Date...',$width='50%');htm_MiniNote('@Orange felter er obligatoriske.');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='deliver',$capt=lang('Delivery:'),$parms='',$icon='fas fa-truck',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='chck',$name='sameaddr',$valu=$arrDeliver[$name],$labl='@Leveres til faktura-adresse',$hint='@Afmærk her, hvis leverings adresse er den samme som faktura adresse',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[['sameaddr','@Same address','@Automatic fillout with the same address as faktura',$namechck]]);htm_Input($type='text',$name='deliname',$valu=$arrDeliver[$name],$labl='@Modtager navn',$hint='@Angiv Modtager Navn',$plho='Navn',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid blue;');htm_Input($type='text',$name='deliaddr',$valu=$arrDeliver[$name],$labl='@Leverings adresse',$hint='@Angiv Leverings Adresse',$plho='Addr..',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid blue;');htm_Input($type='text',$name='deliplac',$valu=$arrDeliver[$name],$labl='@Leverings Sted',$hint='@Angiv Leverings Sted, suplement til adresse',$plho='Sted...',$width='100%');htm_Input($type='text',$name='deli_zip',$valu=$arrDeliver[$name],$labl='@Postnr',$hint='@Angiv Leverings Kunde postnr',$plho='Pnr..',$width='30%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid blue;');htm_Input($type='text',$name='delicity',$valu=$arrDeliver[$name],$labl='@Leverings by',$hint='@Angiv Leveringsstedets Bynavn',$plho='By..',$width='68%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='',$bord='border: 1px solid blue;');htm_Input($type='text',$name='delicoun',$valu=$arrDeliver[$name],$labl='@Leverings Land',$hint='@Angiv Leverings Land',$plho='Land...');htm_hr($ØTitleColr.'; height: 2px');htm_Input($type='text',$name='deliphon',$valu=$arrDeliver[$name],$labl='@Telefon(er)',$hint='@Angiv Modtagers Telefon',$plho='Telf..');htm_Input($type='text',$name='delikont',$valu=$arrDeliver[$name],$labl='@Kontaktperson på leverings adressen',$hint='@Angiv Kontaktpersons Navn',$plho='Navn...');htm_Input($type='mail',$name='delimail',$valu=$arrDeliver[$name],$labl='@Modtagerens Email adresse',$hint='@Angiv Modtagers Email adresse',$plho='Mail...');htm_Input($type='text',$name='shipmeth',$valu=$arrDeliver[$name],$labl='@Fragtmetode.',$hint='@Angiv Forsendelses oplysninger. Hvordan/med hvem er pakken sendt?',$plho='Forsend...');htm_Input($type='area',$name='delinote',$valu=$arrDeliver[$name],$labl='@Noter til fragtmand',$hint='@Noter angående pakkens levering',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='1',$step='',$more='');htm_Input($type='chck',$name='shipped_',$valu=$arrDeliver[$name],$labl='@Status',$hint='@Når ydelsen er afsendt kan beløb indløses',$plho='@Enter...',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[['shipped_','@Er afsendt','@Klar til indløsning',$shipped_]]);htm_Input($type='date',$name='lev_dato',$valu=$arrDeliver[$name],$labl='@Leverings Dato',$hint='@evt. forsendelses dato',$plho='Dato...',$width='50%',);$delName=$arrDeliver['deliname'];$delAddr=$arrDeliver['deliaddr'];$delPlac=$arrDeliver['deliplac'];$del_Zip=$arrDeliver['deli_zip'];$delCity=$arrDeliver['delicity'];htm_LinkButt($labl='@Adresse på kort',$gotoLink='https://krak.dk/'.$arrDeliver['deliname'].'+'.$arrDeliver['deliaddr'].'+'.$arrDeliver['deli_zip'].'+'.$arrDeliver['delicity'].'/personer',$hint='@Vis adresse på kort',$target='_blank');htm_AcceptButt($labl='@Følgeseddel',$hint='@Vis følgeseddel for leverancen',$btnKind='search',$frmName='deliver',$width='',$akey='l',$proc=true,$tipplc='LblTip_text',$tipstyl='',$clickFunction="toast(\"<b>DEMO:</b><br>$delName <br>$delAddr <br>$delPlac <br>$del_Zip - $delCity\",\"lightyellow\",\"black\")");htm_MiniNote('@Blå felter Benyttes til kort-opslag.');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);if($KIS!=true){htm_PanlHead($frmName='conditi',$capt=lang('Conditions:'),$parms='',$icon='far fa-credit-card',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='opti',$name='debigrup',$valu=$arrConditi[$name],$labl='@Debitorgruppe',$hint='@Vælg hvilken gruppe kunden tilhører',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=DEB_Grup());htm_Input($type='opti',$name='betaling',$valu=$arrConditi[$name],$labl='@Betalings metode',$hint='@Hvordan skal der betales',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=DEB_Betl());htm_Input($type='opti',$name='betfrist',$valu=$arrConditi[$name],$labl='@Betalings frist',$hint='@Hvor lang frist er der til betaling',$plho='',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=DEB_Frist(),$action='');htm_Input($type='opti',$name='print_to',$valu=$arrConditi[$name],$labl='@Udskriv til',$hint='@Vælg på hvilken måde skal dokumentet udskrives, gemmes eller sendes.',$plho='',$width='68%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=DEB_Dok());htm_Input($type='text',$name='kunderef',$valu=$arrConditi[$name],$labl='@Kundens referance',$hint='@f.eks. Rekvisitions NR',$plho='Ref...',$width='100%');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='mailinv',$capt=lang('Mail-invoice:'),$parms='',$icon='fas fa-envelope',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='text',$name='mailemne',$valu=$arrMailing[$name],$labl='@Mail emne',$hint='@Angiv Mail emne',$plho='@Vedr...');htm_Input($type='area',$name='mailtext',$valu=$arrMailing[$name],$labl='@Mail tekst',$hint='@Angiv Mail tekst',$plho='@Besked...');htm_Input($type='file',$name='mailvedh',$valu=$arrMailing[$name],$labl='@Mail bilag',$hint='@Angiv Vedhæftet fil',$plho='@Bilag...');htm_Input($type='text',$name='mail__cc',$valu=$arrMailing[$name],$labl='@Kopi til',$hint='@Angiv mail-adresse, som skal modtage en kopi af afsendt mail',$plho='Copy...');htm_Input($type='text',$name='mail__bc',$valu=$arrMailing['mail__bc'],$labl='@Blind-kopi til',$hint='@Angiv mail-adresse, som skal modtage en BC-kopi (skjult) af afsendt mail',$plho='BCopy...');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='contact',$capt=lang('Person contact:'),$parms='',$icon='fas fa-phone-square',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');function ContaktPers($arrCont,$value,$no=''){htm_Input($type='text',$name='indx'."[$no]",$valu=$no,$labl='@No.',$hint='@Nummer styrer rækkefølgen af posterne',$plho='@auto',$width='15%',$algn='center',$unit='',$disa=false,$rows='3',$step='1',$more='');htm_Input($type='text',$name='name'."[$no]",$valu=$value['name' ],$labl='@Kontakt person',$hint='@Angiv Kontakt person',$plho='@Kont...',$width='50%');htm_Input($type='text',$name='titel'."[$no]",$valu=$value['titel' ],$labl='@Titel',$hint='@Angiv personens titel',$plho='@Titl...',$width='35%');htm_Input($type='text',$name='phone'."[$no]",$valu=$value['phone' ],$labl='@Telefon',$hint='@Angiv Telefon',$plho='@Tlf...',$width='50%');htm_Input($type='text',$name='mobil'."[$no]",$valu=$value['mobil' ],$labl='@Mobil',$hint='@Angiv Mobilnr. eller lokalnr',$plho='@Mobil/lok...',$width='50%',$algn='left',$unit='',$disa=false,$rows='3','','');htm_Input($type='mail',$name='email'."[$no]",$valu=$value['email' ],$labl='@E-mail',$hint='@Angiv E-mail',$plho='@Mail...',$width='80%');htm_Input($type='area',$name='remark'."[$no]",$valu=$value['remark'],$labl='@Bemærkning',$hint='@Angiv bemærkning til kontakten, f.eks. rolle (direktør/sekretær/chauffør)',$plho='@Note...',$width='80%',$algn='left',$unit='',$disa=false,$rows='1');htm_hr('lightgray');htm_AcceptButt($labl='@Slet',$hint='@Fjern denne kontakt person <br>(DEMO yet !)',$btnKind='erase',$frmName='contact_'.$no,$width='',$akey='',$proc=true,$tipplc='',$tipstyl='position: absolute; bottom: 8px;',$clickFunction='toast("Remove contact<br>Cant do it yet !","lightyellow","black")');htm_hr('green'.'; height: 2px');htm_nl(1);}arrPrint($arrContact,'$arrContact');$nr=0;if($arrContact)foreach($arrContact as $arrCont=>$value){ContaktPers($arrCont,$value,$no=$nr++);}else htm_Caption('@Ingen oprettede kontakter.');htm_AcceptButt($labl='@Opret Ny',$hint='@Opret en ny kontakt <br>(DEMO yet !)',$btnKind='create',$frmName='contact',$width='',$akey='',$proc=true,$tipplc='',$tipstyl='position: absolute; bottom: 8px;',$clickFunction='toast("Create contact<br>Cant do it yet !","lightyellow","black")');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);$content='<small><b>Opslag i CVR-registret</b> (kun erhverv)<br>
			Hent eller kontroller med data i det offentlige virksomhedsregister.<br>
			Data leveres af CVR API<br> </small>';htm_PanlHead($frmName='cvrform',$capt=lang('CVR-lookup:'),$parms='',$icon='fas fa-database',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_TextDiv($content,$align='left',$marg='8px',$more='');set_FormVars(['cvrLand','cvrKode','cvrSoeg']);get_FormVars(['cvrLand','cvrKode','cvrSoeg']);$cvrLand=$_SESSION['cvrLand'];if(!$cvrLand)$cvrLand='dk';$cvrKode=$_SESSION['cvrKode'];if(!$cvrKode)$cvrKode='search';$cvrSoeg=$_SESSION['cvrSoeg'];if(($cvrLand)and($cvrKode)and($cvrSoeg)){$url='https://cvrapi.dk/api?'.$cvrKode.'='.$cvrSoeg.'&country='.$cvrLand;$content=file_get_contents($url,false,stream_context_create(['http'=>['user_agent'=>'any']]));$svar=json_decode($content,true);if($svar['vat']){$cvrDiv='';$cvrNumm=$svar['vat'];$cvrNavn=$svar['name'];$cvrAddr=$svar['address'];$cvrPost=$svar['zipcode'];$cvrBy=$svar['city'];$cvrTelf=$svar['phone'];if($svar['email']){$cvrDiv.=lang('@Mail').': '.$svar['email'].'&#xa;';}if($svar['fax']){$cvrDiv.=lang('@Fax ').': '.$svar['fax'].'&#xa;';}if($svar['cityname']){$cvrDiv.=lang('@Sted').': '.$svar['cityname'].'&#xa;';}if($svar['companydesc']){$cvrDiv.=lang('@Type').': '.$svar['companydesc'].'&#xa;';}$ix=0;while($svar['owners'][$ix]['name']){$cvrDiv.=lang('@Ejer').': '.$svar['owners'][$ix]['name'].'&#xa;';$ix++;}$ix=0;while($svar['productionunits'][$ix]['pno']){$cvrDiv.=lang('@P-nr').': '.$svar['productionunits'][$ix]['pno'].'&#xa;';$ix++;}}}htm_Input($type='opti',$name='cvrLand',$valu=$cvrLand='dk',$labl='@Lands-register',$hint='@I hvilket land vil du søge?',$plho='',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=CVR_Land(),$llgn='R',$bord='border: 1px solid green;');htm_Input($type='opti',$name='cvrKode',$valu=$cvrKode='search',$labl='@Søg efter',$hint='@Hvad kender du?',$plho='',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$optlist=CVR_Liste(),$llgn='R',$bord='border: 1px solid green;');htm_Input($type='text',$name='cvrSoeg',$valu=$cvrSoeg,$labl='@CVR/P-enh./Telf/Navn',$hint='@Indtast her, data eller firma navn, som du vil søge efter',$plho='@Kun erhverv !',$width='100%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[],$llgn='R',$bord='border: 1px solid green;');htm_MiniNote('@Grønne felter er grundlag for opslag i CVR');htm_hr('lightgray');htm_AcceptButt($labl='@Søg',$hint='@Start søgning  i CVR-registret',$btnKind='create',$frmName='cvrform',$width='',$akey='s',$proc=true);htm_hr('green');htm_TextDiv($content=lang('Register data:'),$align='left',$marg='8px',$more='');htm_Input($type='text',$name='cvrNumm',$valu=$cvrNumm,$labl='@CVR-nummer',$hint='@Hentet i CVR-registret',$plho='@CVR...',$width='33%');htm_Input($type='text',$name='cvrNavn',$valu=$cvrNavn,$labl='@Firmanavn',$hint='@Hentet i CVR-registret',$plho='@Navn...',$width='66%');htm_Input($type='text',$name='cvrTelf',$valu=$cvrTelf,$labl='@Telefon',$hint='@Hentet i CVR-registret',$plho='@Telf...',$width='33%');htm_Input($type='text',$name='cvrAddr',$valu=$cvrAddr,$labl='@Adresse',$hint='@Hentet i CVR-registret',$plho='@Addr...',$width='66%');htm_Input($type='text',$name='cvrPost',$valu=$cvrPost,$labl='@Postnr.',$hint='@Hentet i CVR-registret',$plho='@Post...',$width='33%');htm_Input($type='text',$name='cvrBy',$valu=$cvrBy,$labl='@Bynavn',$hint='@Hentet i CVR-registret',$plho='@By...',$width='66%');htm_AcceptButt('@Benyt',lang('@Benyt de viste data i din registrering af ').$hvem.'. <br>'.lang('@Advarsel: Evt. tidligere data overskrives! (Felter uden indhold, påvirker ikke ekst. data)'.'<br>Virker ikke endnu'),$btnKind='save',$frmName='cvrform',$width='',$akey='b',$proc=true);htm_Input($type='area',$name='cvrDiv',$valu=$cvrDiv,$labl='@Andet',$hint='@Hentet i CVR-registret, diverse supplerende data',$plho='@Diverse...',$width='100%');htm_PanlFoot($labl='@Gem',$subm=false,$title='',$btnKind='save',$akey='',$simu=false,$frmName);$custFld=[ ['@Ekstra Felt 1','@Ekstra - Udfyld Felt 1','@Felt 1...'],['@Ekstra Felt 2','@Ekstra - Udfyld Felt 2','@Felt 2...'],['@Ekstra Felt 3','@Ekstra - Udfyld Felt 3','@Felt 3...'],['@Ekstra Felt 4','@Ekstra - Udfyld Felt 4','@Felt 4...'],['@Ekstra Felt 5','@Ekstra - Udfyld Felt 5','@Felt 5...'] ];htm_PanlHead($frmName='extra',$capt=lang('Extra fields:'),$parms='',$icon='fas fa-plus',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white;');htm_Input($type='text',$name='felt1',$valu=$arrCustfld['felt1'],$labl=lang($custFld[0][0]),$hint=lang($custFld[0][1]),$plho=lang($custFld[0][2]),$width='66%');htm_Input($type='text',$name='felt2',$valu=$arrCustfld['felt2'],$labl=lang($custFld[1][0]),$hint=lang($custFld[1][1]),$plho=lang($custFld[1][2]),$width='66%');htm_Input($type='text',$name='felt3',$valu=$arrCustfld['felt3'],$labl=lang($custFld[2][0]),$hint=lang($custFld[2][1]),$plho=lang($custFld[2][2]),$width='66%');htm_Input($type='text',$name='felt4',$valu=$arrCustfld['felt4'],$labl=lang($custFld[3][0]),$hint=lang($custFld[3][1]),$plho=lang($custFld[3][2]),$width='66%');htm_Input($type='text',$name='felt5',$valu=$arrCustfld['felt5'],$labl=lang($custFld[4][0]),$hint=lang($custFld[4][1]),$plho=lang($custFld[4][2]),$width='66%');htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);}htm_PanlHead($frmName='',$capt='',$parms='',$icon='',$class='panelW280',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: white; visibility: hidden;');htm_PanlFoot();htm_PanlFoot($labl='',$subm=false,$title='');htm_PanlHead($frmName='content',$capt=lang('@Content of the order:'),$parms='',$icon='fas fa-plus',$class='panelW960',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: rgba(240, 240, 240, 0.80);');$link='#';htm_Table($TblCapt=array(),$RowPref=array(),$RowBody=array(['@Pos.','5%','indx','',['center'],'@Pos. nr tildeles automatisk','...pos...'],['@Varenr','8%','text','',['center'],'@Varenummer for ydelsen','Varenr...'],['@Antal','3%','text','',['center'],'@Mængden angivet som antal ','@Antal...'],['@Enhed','6%','text','',['left' ],'@Enheds betegnelse ','@Enh...'],['@Beskrivelse','30%','text','',['left' ],'@Beskrivelse af varen/ydelsen ','@Besk...'],['@Moms%','5%','text','',['center'],'@Moms pct.sats ','@Moms...'],['@À pris','8%','text','2d',['center'],'@Enhedspris ','@Pris...'],['@Rabat%','6%','text','1d',['right' ],'@Rabat procent','@Rabat...'],['@Ialt','10%','calc','2d',['right' ],'@Kalkuleret beløb for den aktuelle postering. ',''],['@Valuta','5%','text','',['center'],'@Valutakode for den valuta, som er benyttet på specifikationen.','DKK'],['@Forfald','9%','hidd','',['center'],'@Beløbets forfalds dato','forf.dato'],),$RowSuff=array(['@Fortryd','2%','text','',['center'],lang('@Fortryd postering! <br>Tilbagefør beløbet ved at klikke på ikonen.').' '.lang('@Er ordren faktureret, kan posten tilbageføres, indtil ordren er bogført. Derefter skal det ske ved at kreditere kunden!'),'<a href='.$link.'><ic class="fas fa-undo" style="font-size:14px; color:red;" title="'.lang('@Tilbagefør denne postering, f.eks. fortryd rykkergebyr').'"></ic></a>'],['@Flyt','2%','text','',['center'],'@Flyt en post op eller ned.','<a href='.$link.'><ic class="fas fa-arrows-alt-v" style="font-size:14px; color:green;" title="'.lang('@Virker ikke endnu').'"></ic></a>']),$TblNote='<small>Denne tabel indeholder eksempel på automatisk kalkulation:<br>$ialt= ($DataRow[2]*$DataRow[6])*(100-$DataRow[7])/100*(100+$DataRow[5])/100;</small>',$data=$arrContent,$fldNames=['post','product','numb','unit','description','vat','price','discount','total','currency','duedate'],$FilterOn=false,$SorterOn=false,$CreateRec=true,$ModifyRec=true,$ViewHeight='250px',$CalledFrom=__FUNCTION__);htm_PanlFoot($labl='@Gem',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='handling',$capt=lang('Handling the order:'),$parms='',$icon='fas fa-check',$class='panelW960',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: lightgray;');htm_nl(1);htm_Input($type='text',$name='ordr',$valu=$xx='0000',$labl='<b>'.lang('@Ordre:').'</b>',$hint='@Systemfelt: Ordre nummer',$plho='',$width='100px',$algn='left',$unit='',$disa=true,$rows='1',$step='',$more='');htm_Input($type='text',$name='cust',$valu='Customer',$labl='<b>'.lang('@Kunde:').'</b>',$hint='@Systemfelt: Kunden navn',$plho='',$width='400px',$algn='left',$unit='',$disa=true,$rows='1',$step='',$more='');htm_Input($type='dec2',$name='totl',$valu=0,$labl='<b>'.lang('@Total:').'</b>',$hint='@Systemfelt: Beløb inkl. moms',$plho='',$width='120px',$algn='center',$unit=' DKK ',$disa=true,$rows='1',$step='',$more='');htm_nl(2);htm_AcceptButt('@Opret / opdater',lang('@Gem ordren'),$btnKind='save',$frmName='handling',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;');htm_nl(2);htm_AcceptButt('@Opslag',lang('@Gennemsøg andre eksisterende ordrer'),$btnKind='goon',$frmName='doLookup',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;',$clickFunction='toast("Opslag<br>Cant search yet !","orange","black")');htm_AcceptButt('@Dan Følgeseddel',lang('@Lav følgeseddel til ordrens forsendelse'),$btnKind='create',$frmName='doNote',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;',$clickFunction='toast("Dan følgeseddel<br>Cant create yet !","orange","black")');htm_AcceptButt('@Dan Faktura',lang('@Lav faktura for (den gemte !) ordre'),$btnKind='create',$frmName='doInvo',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;',$clickFunction='toast("Dan faktura<br>Cant create yet !","orange","black")');htm_AcceptButt('@Kreditér',lang('@Nulstil ved at kreditére ordren - hvis den er faktureret'),$btnKind='home',$frmName='doCredit',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;',$clickFunction='toast("Kreditér<br>Cant do it yet !","orange","black")');htm_AcceptButt('@Slet',lang('@Slet ordren - forudsat faktura ikke er dannet'),$btnKind='erase',$frmName='doErase',$width='120px',$akey='',$proc=true,$tipplc='LblTip_text',$tipstyl='position: absolute; bottom: 50px;',$clickFunction='toast("Slet<br>Cant erase yet !","orange","black")');htm_nl(2);htm_PanlFoot();htm_nl(1);htm_PanlHead($frmName='language',$capt='Settings:',$parms='',$icon='fas fa-wrench',$class='panelW320',$func='Undefined',$more='',$BookMark='blindAlley.page.php');htm_TextDiv(lang('@Change the language for this page:<br>'));global $lang;htm_Input($type='opti',$name='language',$valu=$lang,$labl='@Select language',$hint='@Select among installed languages',$plho='',$width='50%',$algn='left',$unit='',$disa=false,$rows='3',$step='',$more='',$list=[['en','@English','@Select english language'],['fr','@French','@Select french language'],['de','@German','@Select german language'],['da','@Dansk','@Select danish language']]);htm_TextDiv('Note: The translate is not complete !<br> Only the Panel-headers will change.<br>');htm_PanlFoot($labl='@Gem og benyt',$subm=true,$title='',$btnKind='save',$akey='',$simu=false,$frmName);htm_PanlHead($frmName='',$capt='Info about this page:',$parms='',$icon='fas fa-info',$class='panelW320',$func='Undefined',$more='',$BookMark='blindAlley.page.php',$panlBg='background-color: lightyellow; ');htm_TextDiv('This is a demo under development !<br>
			It stores data to JSON text files.<br>
			No connection to a SQL-database.<br>
			There is also a lack of functionality.<br>
		');htm_PanlFoot();if($KIS!=true){if($bytes==0){PanelOff($First=5,$Last=11);PanelOff($First=14,$Last=15);PanelOff($First=1,$Last=1);}}htm_PageFina();?>